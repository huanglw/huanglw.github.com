window.onload=function(){var leftCircles=document.querySelectorAll(".left .circle");var rightCircles=document.querySelectorAll(".right .circle");var bets=[];var redBallSelected=[];var blueBallSelected="";var currNum=1;leftCircles.forEach(function(item){item.onclick=function(){var selectNum=item.innerText;if(redBallSelected.length<6){if(!hasClass(item,"active")){redBallSelected.push(selectNum);addClass(item,"active");console.log(redBallSelected.join(","))}else{redBallSelected=redBallSelected.filter(function(item){return item!=selectNum});removeClass(item,"active");console.log(redBallSelected.join(","))}}else{alert("一注最多能选红球6个！")}}});rightCircles.forEach(function(item){var selectNum=item.innerText;item.onclick=function(){if(blueBallSelected==""&&!hasClass(item,"active")){blueBallSelected=selectNum;addClass(item,"active");console.log(blueBallSelected)}else{if(blueBallSelected!==""&&hasClass(item,"active")){blueBallSelected="";removeClass(item,"active");console.log(blueBallSelected)}else{alert("一注最多能选蓝球1个！")}}}});var confirmBtn=document.getElementById("confirmBtn");confirmBtn.onclick=confirmOne;function confirmOne(){if(redBallSelected.length==6&&blueBallSelected!==""&&bets.length<5){var newBet={};newBet.red=redBallSelected;newBet.blue=blueBallSelected;clearAll();bets.push(newBet);insertToEle(newBet);count()}else{if(bets.length>=5){alert("已经有5注了")}else{alert("请选择6个红球，1个蓝球")}}}var random6=document.getElementById("random6");random6.onclick=random6ball;var random1=document.getElementById("random1");random1.onclick=random1ball;var random5=document.getElementById("random5");random5.onclick=random5betting;document.getElementById("clearBtn").onclick=clearBettings;document.getElementById("addBtn").onclick=function(){currNum+=1;document.getElementById("currNum").innerText=currNum;count()};document.getElementById("reduceBtn").onclick=function(){if(currNum==1){return}currNum-=1;document.getElementById("currNum").innerText=currNum;count()};function insertToEle(bet){var dd=document.createElement("div");dd.setAttribute("class","betting-info");var parentEle=document.getElementById("bettings-info");var childCount=parentEle.childElementCount;var insertText=childCount+1+". 单注 "+bet.red.join("   ")+"  "+bet.blue+"  &nbsp;&nbsp;  <strong>2元</strong>  <button>编辑</button><button>修改</button>";dd.innerHTML=insertText;parentEle.appendChild(dd)}function clearAll(){redBallSelected=[];blueBallSelected="";leftCircles.forEach(function(item){if(hasClass(item,"active")){removeClass(item,"active")}});rightCircles.forEach(function(item){if(hasClass(item,"active")){removeClass(item,"active")}})}function clearLeft(){redBallSelected=[];leftCircles.forEach(function(item){if(hasClass(item,"active")){removeClass(item,"active")}})}function clearRight(){blueBallSelected="";rightCircles.forEach(function(item){if(hasClass(item,"active")){removeClass(item,"active")}})}function random6ball(){var allred=["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32"];console.log("random6");clearLeft();for(var i=0;i<6;i++){var value=parseInt(Math.random()*(32-1)+1);while(redBallSelected.indexOf(value)>=0){value=parseInt(Math.random()*(32-1)+1)}redBallSelected.push(allred[value-1]);addClass(leftCircles[value-1],"active")}}function random1ball(){var allblue=["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16"];clearRight();var value=parseInt(Math.random()*(16-1)+1);blueBallSelected=allblue[value-1];addClass(rightCircles[value-1],"active")}function random5betting(){console.log("random5");for(var i=0;i<5;i++){random6ball();random1ball();confirmOne()}count()}function clearBettings(){bets=[];document.getElementById("bettings-info").innerHTML=""}function count(){document.getElementById("totalNum").innerText=bets.length*currNum*2;document.getElementById("bettingNum").innerText=bets.length}function hasClass(obj,cls){return obj.className.match(new RegExp("(\\s|^)"+cls+"(\\s|$)"))}function addClass(obj,cls){if(!hasClass(obj,cls)){obj.className+=" "+cls}}function removeClass(obj,cls){if(hasClass(obj,cls)){var reg=new RegExp("(\\s|^)"+cls+"(\\s|$)");obj.className=obj.className.replace(reg,"  ")}}function toggleClass(obj,cls){if(hasClass(obj,cls)){removeClass(obj,cls)}else{addClass(obj,cls)}}};
